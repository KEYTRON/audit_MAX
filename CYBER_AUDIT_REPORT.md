# КИБЕР РАССЛЕДОВАНИЕ ПРИЛОЖЕНИЯ MAX
## Отчет о безопасности и анализе

### ОБЩАЯ ИНФОРМАЦИЯ
- **Название приложения**: MAX
- **Разработчик**: OneMe (ru.oneme.desktop)
- **Версия macOS**: 25.8.2
- **Версия max-service**: 1.42.26403
- **Минимальная версия macOS**: 14.0
- **Архитектуры**: x86_64, arm64 (универсальный бинарный файл)

### АНАЛИЗ БЕЗОПАСНОСТИ

#### 1. КРИТИЧЕСКИЕ УЯЗВИМОСТИ БЕЗОПАСНОСТИ

##### 1.1 Отключение защиты от выполнения кода (Code Signing)
```xml
<key>com.apple.security.cs.allow-unsigned-executable-memory</key>
<true/>
<key>com.apple.security.cs.disable-library-validation</key>
<true/>
<key>com.apple.security.cs.allow-jit</key>
<true/>
<key>com.apple.security.cs.disable-executable-page-protection</key>
<true/>
```

**РИСК**: КРИТИЧЕСКИЙ
- Приложение может загружать и выполнять неподписанный код
- Отключена проверка библиотек
- Разрешено выполнение JIT-кода
- Отключена защита страниц от выполнения

##### 1.2 Расширенные разрешения на доступ к устройствам
```xml
<key>com.apple.security.device.camera</key>
<true/>
<key>com.apple.security.device.microphone</key>
<true/>
<key>com.apple.security.device.audio-input</key>
<true/>
```

**РИСК**: ВЫСОКИЙ
- Полный доступ к камере
- Полный доступ к микрофону
- Полный доступ к аудиовходу

#### 2. РАЗРЕШЕНИЯ И ДОСТУПЫ

##### 2.1 macOS разрешения
- **Камера**: "Разрешить MAX доступ к камере?"
- **Микрофон**: "Разрешить MAX доступ к микрофону?"
- **Автоматизация**: Доступ к отправке событий автоматизации
- **Файловая система**: Доступ к Desktop, Documents, Downloads

##### 2.2 Android разрешения (из APK)
- **RECORD_AUDIO**: Запись аудио
- **Камера**: Доступ к камере
- **Файлы**: Загрузка/выгрузка файлов
- **Сеть**: Интернет-доступ

#### 3. СЕТЕВАЯ АКТИВНОСТЬ

##### 3.1 Обнаруженные сетевые компоненты
- **HTTP/HTTPS клиент**: OkHttp
- **WebView**: QtWebView framework
- **Сетевые библиотеки**: libnetwork.dylib
- **URL парсер**: liburl_parser.dylib

##### 3.2 Потенциальные серверы
- **VK Analytics**: tracker-api.vk-analytics.ru
- **OneMe серверы**: Обнаружены ссылки на one.me домены

#### 4. АРХИТЕКТУРА ПРИЛОЖЕНИЯ

##### 4.1 Основные компоненты
- **Основное приложение**: Max.app (Qt-based)
- **Сервис**: max-service.app (отдельный процесс)
- **Фреймворки**: Qt 6.x, Sparkle (автообновления)

##### 4.2 Модули
- **Авторизация**: OneMeAuthorization
- **Звонки**: CallsClientModule, CallVestibuleModule
- **Медиа**: MediaPlayerModule, ImageProcessingModule
- **Уведомления**: NotificationsModule
- **Обновления**: UpdaterModule

#### 5. ПОТЕНЦИАЛЬНЫЕ УГРОЗЫ

##### 5.1 Угрозы безопасности
1. **Выполнение неподписанного кода** - критическая уязвимость
2. **Неограниченный доступ к устройствам** - высокий риск
3. **Отключенная проверка библиотек** - средний риск
4. **JIT-выполнение** - средний риск

##### 5.2 Угрозы конфиденциальности
1. **Полный доступ к камере и микрофону**
2. **Доступ к файловой системе**
3. **Сетевой мониторинг**
4. **Возможность записи аудио/видео**

##### 5.3 Угрозы целостности
1. **Отключенная защита страниц от выполнения**
2. **Возможность модификации кода во время выполнения**

#### 6. РЕКОМЕНДАЦИИ ПО БЕЗОПАСНОСТИ

##### 6.1 Немедленные действия
1. **Ограничить разрешения** на камеру и микрофон
2. **Включить проверку библиотек** (Code Signing)
3. **Отключить JIT-выполнение**
4. **Включить защиту страниц от выполнения**

##### 6.2 Мониторинг
1. **Отслеживать сетевую активность**
2. **Мониторить доступ к устройствам**
3. **Проверять загружаемые библиотеки**
4. **Анализировать сетевые подключения**

##### 6.3 Долгосрочные меры
1. **Пересмотреть архитектуру безопасности**
2. **Внедрить принцип минимальных привилегий**
3. **Добавить аудит безопасности**
4. **Регулярные проверки безопасности**

#### 7. ЗАКЛЮЧЕНИЕ

Приложение MAX представляет **КРИТИЧЕСКИЙ РИСК БЕЗОПАСНОСТИ** из-за:
- Отключенных механизмов защиты от выполнения кода
- Неограниченного доступа к устройствам
- Отсутствия проверки библиотек
- Возможности выполнения неподписанного кода

**Рекомендуется немедленное ограничение использования** до исправления выявленных уязвимостей.

#### 8. ТЕХНИЧЕСКИЕ ДЕТАЛИ

##### 8.1 Файлы конфигурации
- **Info.plist**: Основная конфигурация приложения
- **appentitlements.entitlements**: Разрешения безопасности
- **qt.conf**: Конфигурация Qt

##### 8.2 Исполняемые файлы
- **Max**: Основное приложение (Qt-based)
- **max-service**: Сервисный процесс
- **crashpad_handler**: Обработчик крашей

##### 8.3 Зависимости
- **Qt 6.x**: Основной UI фреймворк
- **FFmpeg**: Обработка медиа (libavcodec, libavformat)
- **Sparkle**: Автообновления
- **Собственные библиотеки**: libcore, libnetwork, libcalls

---
**Дата анализа**: $(date)
**Аналитик**: Кибер-аудитор
**Статус**: КРИТИЧЕСКИЙ РИСК
